#!/usr/bin/env bash

set -o errexit
set -o nounset
set -o pipefail

# find-manpage with fzf

main() {
	local query=$1
	PAGER=cat apropos $query \
		| sed -e 's/^\([^(]*\)(\([^)]*\))/\1:\2:/' \
		| fzf --query=$query \
			--delimiter=':| - ' \
			--with-nth=..-2 \
			--preview="MANPAGER=cat man {2} {1}" \
			--bind='enter:execute(man {2} {1})'
}

main "$@"
